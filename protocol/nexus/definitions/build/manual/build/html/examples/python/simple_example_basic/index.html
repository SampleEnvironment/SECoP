


<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Getting started &#8212; nexus v2024.02 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinxdoc.css?v=87629129" />
    <link rel="stylesheet" type="text/css" href="../../../_static/details_summary_hide.css?v=30df4bca" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" href="../../../_static/blockquote.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/rubric.css" type="text/css" />
    <script src="../../../_static/documentation_options.js?v=04096e4a"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/tabs.js?v=3030b3cb"></script>
    <link rel="icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="Write a NeXus HDF5 file" href="../simple_example_write1/index.html" />
    <link rel="prev" title="2.1.2. HDF5 in Python" href="../index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../simple_example_write1/index.html" title="Write a NeXus HDF5 file"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="2.1.2. HDF5 in Python"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">nexus v2024.02 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" ><span class="section-number">2. </span>Examples of writing and reading NeXus data files</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" accesskey="U"><span class="section-number">2.1.2. </span>HDF5 in Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Getting started</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="getting-started">
<span id="example-python-complete"></span><h1>Getting started<a class="headerlink" href="#getting-started" title="Link to this heading">¶</a></h1>
<section id="write-a-nexus-hdf5-file">
<span id="example-python-writing"></span><h2>Write a NeXus HDF5 File<a class="headerlink" href="#write-a-nexus-hdf5-file" title="Link to this heading">¶</a></h2>
<p>In the main code section of <a class="reference internal" href="#example-python-basicwriter"><span class="std std-ref">simple_example_basic_write.py</span></a>,
the data (<code class="docutils literal notranslate"><span class="pre">mr</span></code> is similar to “two_theta” and
<code class="docutils literal notranslate"><span class="pre">I00</span></code> is similar to “counts”) is collated into two Python lists. We use the
<strong>numpy</strong> package to read the file and parse the two-column format.</p>
<p>The new HDF5 file is opened (and created if not already existing) for writing,
setting common NeXus attributes in the same command from our support library.
Proper HDF5+NeXus groups are created for <code class="docutils literal notranslate"><span class="pre">/entry:NXentry/mr_scan:NXdata</span></code>.
Since we are not using the NAPI, our
support library must create and set the <code class="docutils literal notranslate"><span class="pre">NX_class</span></code> attribute on each group.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We want to create the desired structure of
<code class="docutils literal notranslate"><span class="pre">/entry:NXentry/mr_scan:NXdata/</span></code>.</p>
<ol class="arabic simple">
<li><p>First, our support library calls
<code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">=</span> <span class="pre">h5py.File()</span></code>
to create the file and root level NeXus structure.</p></li>
<li><p>Then, it calls
<code class="docutils literal notranslate"><span class="pre">nxentry</span> <span class="pre">=</span> <span class="pre">f.create_group(&quot;entry&quot;)</span></code>
to create the <code class="docutils literal notranslate"><span class="pre">NXentry</span></code> group called
<code class="docutils literal notranslate"><span class="pre">entry</span></code> at the root level.</p></li>
<li><p>Then, it calls
<code class="docutils literal notranslate"><span class="pre">nxdata</span> <span class="pre">=</span> <span class="pre">nxentry.create_group(&quot;mr_scan&quot;)</span></code>
to create the <code class="docutils literal notranslate"><span class="pre">NXentry</span></code> group called
<code class="docutils literal notranslate"><span class="pre">entry</span></code> as a child of the <code class="docutils literal notranslate"><span class="pre">NXentry</span></code> group.</p></li>
</ol>
</div>
<p>Next, we create a dataset called <code class="docutils literal notranslate"><span class="pre">title</span></code> to hold a title string that can
appear on the default plot.</p>
<p>Next, we create datasets for <code class="docutils literal notranslate"><span class="pre">mr</span></code> and <code class="docutils literal notranslate"><span class="pre">I00</span></code> using our support library.
The data type of each, as represented in <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, will be recognized by
<code class="docutils literal notranslate"><span class="pre">h5py</span></code> and automatically converted to the proper HDF5 type in the file.
A Python dictionary of attributes is given, specifying the engineering units and other
values needed by NeXus to provide a default plot of this data.  By setting <code class="docutils literal notranslate"><span class="pre">signal=&quot;I00&quot;</span></code>
as an attribute on the group, NeXus recognizes <code class="docutils literal notranslate"><span class="pre">I00</span></code> as the default
<em>y</em> axis for the plot.  The <code class="docutils literal notranslate"><span class="pre">axes=&quot;mr&quot;</span></code> attribute on the <a class="reference internal" href="../../../classes/base_classes/NXdata.html#nxdata"><span class="std std-ref">NXdata</span></a>
group connects the dataset to be used as the <em>x</em> axis.</p>
<p>Finally, we <em>must</em> remember to call <code class="docutils literal notranslate"><span class="pre">f.close()</span></code> or we might
corrupt the file when the program quits.</p>
<div class="compound">
<p class="rubric"><em>simple_example_basic_write.py</em>: Write a NeXus HDF5 file using Python with h5py</p>
<div class="sphinx-tabs docutils container" id="example-python-basicwriter">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">nexusformat</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">h5py</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="sd">&quot;&quot;&quot;Writes a NeXus HDF5 file using h5py and numpy&quot;&quot;&quot;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="linenos"> 5</span><span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">X</span>
<span class="linenos"> 6</span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="kn">from</span> <span class="nn">nexusformat.nexus</span> <span class="kn">import</span> <span class="n">NXdata</span><span class="p">,</span> <span class="n">NXentry</span><span class="p">,</span> <span class="n">NXfield</span><span class="p">,</span> <span class="n">nxopen</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Write a NeXus HDF5 file&quot;</span><span class="p">)</span>
<span class="linenos">11</span><span class="n">fileName</span> <span class="o">=</span> <span class="s2">&quot;simple_example_basic.nexus.hdf5&quot;</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="c1"># load data from two column format</span>
<span class="linenos">14</span><span class="n">data_filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;simple_example.dat&quot;</span><span class="p">)</span>
<span class="linenos">15</span><span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">data_filename</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="linenos">16</span><span class="n">mr_arr</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">17</span><span class="n">i00_arr</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;int32&quot;</span><span class="p">)</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="c1"># create the HDF5 NeXus file</span>
<span class="linenos">20</span><span class="k">with</span> <span class="n">nxopen</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="linenos">21</span>
<span class="linenos">22</span>    <span class="c1"># create the NXentry group</span>
<span class="linenos">23</span>    <span class="n">f</span><span class="p">[</span><span class="s2">&quot;entry&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">NXentry</span><span class="p">()</span>
<span class="linenos">24</span>    <span class="n">f</span><span class="p">[</span><span class="s2">&quot;entry/title&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1-D scan of I00 v. mr&quot;</span>
<span class="linenos">25</span>
<span class="linenos">26</span>    <span class="c1"># create the NXdata group</span>
<span class="linenos">27</span>    <span class="n">x</span> <span class="o">=</span> <span class="n">NXfield</span><span class="p">(</span><span class="n">mr_arr</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mr&quot;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s2">&quot;degrees&quot;</span><span class="p">,</span> <span class="n">long_name</span><span class="o">=</span><span class="s2">&quot;USAXS mr (degrees)&quot;</span><span class="p">)</span>
<span class="linenos">28</span>    <span class="n">y</span> <span class="o">=</span> <span class="n">NXfield</span><span class="p">(</span><span class="n">i00_arr</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;I00&quot;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s2">&quot;counts&quot;</span><span class="p">,</span>
<span class="linenos">29</span>                <span class="n">long_name</span><span class="o">=</span><span class="s2">&quot;USAXS I00 (counts)&quot;</span><span class="p">)</span>
<span class="linenos">30</span>    <span class="n">f</span><span class="p">[</span><span class="s2">&quot;entry/mr_scan&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">NXdata</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;wrote file:&quot;</span><span class="p">,</span> <span class="n">fileName</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="sd">&quot;&quot;&quot;Writes a NeXus HDF5 file using h5py and numpy&quot;&quot;&quot;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="linenos"> 6</span><span class="kn">import</span> <span class="nn">h5py</span>  <span class="c1"># HDF5 support</span>
<span class="linenos"> 7</span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Write a NeXus HDF5 file&quot;</span><span class="p">)</span>
<span class="linenos">10</span><span class="n">fileName</span> <span class="o">=</span> <span class="s2">&quot;simple_example_basic.nexus.hdf5&quot;</span>
<span class="linenos">11</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">astimezone</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="c1"># load data from two column format</span>
<span class="linenos">14</span><span class="n">data_filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;simple_example.dat&quot;</span><span class="p">)</span>
<span class="linenos">15</span><span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">data_filename</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="linenos">16</span><span class="n">mr_arr</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">17</span><span class="n">i00_arr</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;int32&quot;</span><span class="p">)</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="c1"># create the HDF5 NeXus file</span>
<span class="linenos">20</span><span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="linenos">21</span>    <span class="c1"># point to the default data to be plotted</span>
<span class="linenos">22</span>    <span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;entry&quot;</span>
<span class="linenos">23</span>    <span class="c1"># give the HDF5 root some more attributes</span>
<span class="linenos">24</span>    <span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;file_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fileName</span>
<span class="linenos">25</span>    <span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;file_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timestamp</span>
<span class="linenos">26</span>    <span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;instrument&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;APS USAXS at 32ID-B&quot;</span>
<span class="linenos">27</span>    <span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;creator&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;simple_example_basic_write.py&quot;</span>
<span class="linenos">28</span>    <span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;NeXus_version&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;4.3.0&quot;</span>
<span class="linenos">29</span>    <span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;HDF5_Version&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">hdf5_version</span>
<span class="linenos">30</span>    <span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;h5py_version&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">version</span>
<span class="linenos">31</span>
<span class="linenos">32</span>    <span class="c1"># create the NXentry group</span>
<span class="linenos">33</span>    <span class="n">nxentry</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="s2">&quot;entry&quot;</span><span class="p">)</span>
<span class="linenos">34</span>    <span class="n">nxentry</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;NX_class&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;NXentry&quot;</span>
<span class="linenos">35</span>    <span class="n">nxentry</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;mr_scan&quot;</span>
<span class="linenos">36</span>    <span class="n">nxentry</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;1-D scan of I00 v. mr&quot;</span><span class="p">)</span>
<span class="linenos">37</span>
<span class="linenos">38</span>    <span class="c1"># create the NXentry group</span>
<span class="linenos">39</span>    <span class="n">nxdata</span> <span class="o">=</span> <span class="n">nxentry</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="s2">&quot;mr_scan&quot;</span><span class="p">)</span>
<span class="linenos">40</span>    <span class="n">nxdata</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;NX_class&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;NXdata&quot;</span>
<span class="linenos">41</span>    <span class="n">nxdata</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;signal&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;I00&quot;</span>  <span class="c1"># Y axis of default plot</span>
<span class="linenos">42</span>    <span class="n">nxdata</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;axes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;mr&quot;</span>  <span class="c1"># X axis of default plot</span>
<span class="linenos">43</span>    <span class="n">nxdata</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;mr_indices&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">44</span>        <span class="mi">0</span><span class="p">,</span>
<span class="linenos">45</span>    <span class="p">]</span>  <span class="c1"># use &quot;mr&quot; as the first dimension of I00</span>
<span class="linenos">46</span>
<span class="linenos">47</span>    <span class="c1"># X axis data</span>
<span class="linenos">48</span>    <span class="n">ds</span> <span class="o">=</span> <span class="n">nxdata</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s2">&quot;mr&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mr_arr</span><span class="p">)</span>
<span class="linenos">49</span>    <span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;degrees&quot;</span>
<span class="linenos">50</span>    <span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;long_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;USAXS mr (degrees)&quot;</span>  <span class="c1"># suggested X axis plot label</span>
<span class="linenos">51</span>
<span class="linenos">52</span>    <span class="c1"># Y axis data</span>
<span class="linenos">53</span>    <span class="n">ds</span> <span class="o">=</span> <span class="n">nxdata</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s2">&quot;I00&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">i00_arr</span><span class="p">)</span>
<span class="linenos">54</span>    <span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;counts&quot;</span>
<span class="linenos">55</span>    <span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;long_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;USAXS I00 (counts)&quot;</span>  <span class="c1"># suggested Y axis plot label</span>
<span class="linenos">56</span>
<span class="linenos">57</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;wrote file:&quot;</span><span class="p">,</span> <span class="n">fileName</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
</div>
</section>
<section id="read-a-nexus-hdf5-file">
<span id="example-python-reading"></span><h2>Read a NeXus HDF5 File<a class="headerlink" href="#read-a-nexus-hdf5-file" title="Link to this heading">¶</a></h2>
<p>The file reader, <a class="reference internal" href="#example-python-reader"><span class="std std-ref">simple_example_basic_read.py</span></a>,
opens the HDF5 we wrote above,
prints the HDF5 attributes from the file, reads the two datasets,
and then prints them out as columns.  As simple as that.
Of course, real code might add some error-handling and
extracting other useful stuff from the file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See that we identified each of the two datasets using HDF5 absolute path references
(just using the group and dataset names). Also, while coding this example, we were reminded
that HDF5 is sensitive to upper or lowercase. That is, <code class="docutils literal notranslate"><span class="pre">I00</span></code> is not the same is
<code class="docutils literal notranslate"><span class="pre">i00</span></code>.</p>
</div>
<div class="compound">
<p class="rubric"><em>simple_example_basic_read.py</em>: Read a NeXus HDF5 file using Python</p>
<div class="sphinx-tabs docutils container" id="example-python-reader">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">nexusformat</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">h5py</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos">2</span><span class="sd">&quot;&quot;&quot;Reads NeXus HDF5 files using nexusformat and prints the contents&quot;&quot;&quot;</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="kn">from</span> <span class="nn">nexusformat.nexus</span> <span class="kn">import</span> <span class="n">nxopen</span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="n">fileName</span> <span class="o">=</span> <span class="s2">&quot;simple_example_basic.nexus.hdf5&quot;</span>
<span class="linenos">7</span><span class="k">with</span> <span class="n">nxopen</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="linenos">8</span>    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">tree</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="sd">&quot;&quot;&quot;Reads NeXus HDF5 files using h5py and prints the contents&quot;&quot;&quot;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">h5py</span>  <span class="c1"># HDF5 support</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="n">fileName</span> <span class="o">=</span> <span class="s2">&quot;simple_example_basic.nexus.hdf5&quot;</span>
<span class="linenos"> 7</span><span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="linenos"> 8</span>    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<span class="linenos"> 9</span>        <span class="nb">print</span><span class="p">(</span><span class="n">item</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="n">item</span><span class="p">])</span>
<span class="linenos">10</span>    <span class="n">mr</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s2">&quot;/entry/mr_scan/mr&quot;</span><span class="p">]</span>
<span class="linenos">11</span>    <span class="n">i00</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s2">&quot;/entry/mr_scan/I00&quot;</span><span class="p">]</span>
<span class="linenos">12</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="se">\t</span><span class="si">%s</span><span class="se">\t</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="s2">&quot;mr&quot;</span><span class="p">,</span> <span class="s2">&quot;I00&quot;</span><span class="p">))</span>
<span class="linenos">13</span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mr</span><span class="p">)):</span>
<span class="linenos">14</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="se">\t</span><span class="si">%g</span><span class="se">\t</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">mr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">i00</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
</pre></div>
</div>
</div></div>
</div>
<p>Output from <code class="docutils literal notranslate"><span class="pre">simple_example_basic_read.py</span></code> is shown next.</p>
<div class="compound">
<p class="rubric">Output from <code class="docutils literal notranslate"><span class="pre">simple_example_basic_read.py</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>file_name: simple_example_basic.nexus.hdf5
<span class="linenos"> 2</span>file_time: 2010-10-18T17:17:04-0500
<span class="linenos"> 3</span>creator: simple_example_basic_write.py
<span class="linenos"> 4</span>HDF5_Version: 1.8.5
<span class="linenos"> 5</span>NeXus_version: 4.3.0
<span class="linenos"> 6</span>h5py_version: 1.2.1
<span class="linenos"> 7</span>instrument: APS USAXS at 32ID-B
<span class="linenos"> 8</span>#   mr  I00
<span class="linenos"> 9</span>0   17.9261 1037
<span class="linenos">10</span>1   17.9259 1318
<span class="linenos">11</span>2   17.9258 1704
<span class="linenos">12</span>3   17.9256 2857
<span class="linenos">13</span>4   17.9254 4516
<span class="linenos">14</span>5   17.9252 9998
<span class="linenos">15</span>6   17.9251 23819
<span class="linenos">16</span>7   17.9249 31662
<span class="linenos">17</span>8   17.9247 40458
<span class="linenos">18</span>9   17.9246 49087
<span class="linenos">19</span>10  17.9244 56514
<span class="linenos">20</span>11  17.9243 63499
<span class="linenos">21</span>12  17.9241 66802
<span class="linenos">22</span>13  17.9239 66863
<span class="linenos">23</span>14  17.9237 66599
<span class="linenos">24</span>15  17.9236 66206
<span class="linenos">25</span>16  17.9234 65747
<span class="linenos">26</span>17  17.9232 65250
<span class="linenos">27</span>18  17.9231 64129
<span class="linenos">28</span>19  17.9229 63044
<span class="linenos">29</span>20  17.9228 60796
<span class="linenos">30</span>21  17.9226 56795
<span class="linenos">31</span>22  17.9224 51550
<span class="linenos">32</span>23  17.9222 43710
<span class="linenos">33</span>24  17.9221 29315
<span class="linenos">34</span>25  17.9219 19782
<span class="linenos">35</span>26  17.9217 12992
<span class="linenos">36</span>27  17.9216 6622
<span class="linenos">37</span>28  17.9214 4198
<span class="linenos">38</span>29  17.9213 2248
<span class="linenos">39</span>30  17.9211 1321
</pre></div>
</div>
</div>
</section>
<section id="downloads">
<h2>downloads<a class="headerlink" href="#downloads" title="Link to this heading">¶</a></h2>
<p>The Python code and files related to this section may be downloaded from the following table.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>file</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference download internal" download="" href="../../../_downloads/7c1e66cc3d34663e3384e0c1e1389e8d/simple_example.dat"><code class="xref download docutils literal notranslate"><span class="pre">../simple_example.dat</span></code></a></p></td>
<td><p>2-column ASCII data used in this section</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference download internal" download="" href="../../../_downloads/7f70385414e03aec879036a4874fba3a/simple_example_basic_read.py"><code class="xref download docutils literal notranslate"><span class="pre">simple_example_basic_read.py</span></code></a></p></td>
<td><p>h5py code to read example <em>simple_example_basic.nexus.hdf5</em></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference download internal" download="" href="../../../_downloads/f9e3e5099077c1eeb851a2f2c7fc2c10/simple_example_basic_read.py"><code class="xref download docutils literal notranslate"><span class="pre">nexusformat/simple_example_basic_read.py</span></code></a></p></td>
<td><p>nexusformat code to read example <em>simple_example_basic.nexus.hdf5</em></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference download internal" download="" href="../../../_downloads/fe206707c0b566cd8fdb04f3688727bd/simple_example_basic_write.py"><code class="xref download docutils literal notranslate"><span class="pre">simple_example_basic_write.py</span></code></a></p></td>
<td><p>h5py code to write example <em>simple_example_basic.nexus.hdf5</em></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference download internal" download="" href="../../../_downloads/5411f13e1f2f588da57f0ab35ff5b362/simple_example_basic_write.py"><code class="xref download docutils literal notranslate"><span class="pre">nexusformat/simple_example_basic_write.py</span></code></a></p></td>
<td><p>nexusformat code to write example <em>simple_example_basic.nexus.hdf5</em></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference download internal" download="" href="../../../_downloads/849b36d2e360ec1c04667a9ff5a702e6/simple_example_basic.nexus_h5dump.txt"><code class="xref download docutils literal notranslate"><span class="pre">simple_example_basic.nexus_h5dump.txt</span></code></a></p></td>
<td><p><em>h5dump</em> analysis of the NeXus file</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference download internal" download="" href="../../../_downloads/b4d8e558c82c9e403483d86f4344f0c4/simple_example_basic.nexus.hdf5"><code class="xref download docutils literal notranslate"><span class="pre">simple_example_basic.nexus.hdf5</span></code></a></p></td>
<td><p>NeXus file written by <em>BasicWriter</em></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference download internal" download="" href="../../../_downloads/a44cd99f28606e0780a37df4478b8626/simple_example_basic.nexus_structure.txt"><code class="xref download docutils literal notranslate"><span class="pre">simple_example_basic.nexus_structure.txt</span></code></a></p></td>
<td><p><em>punx tree</em> analysis of the NeXus file</p></td>
</tr>
</tbody>
</table>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Getting started</a><ul>
<li><a class="reference internal" href="#write-a-nexus-hdf5-file">Write a NeXus HDF5 File</a></li>
<li><a class="reference internal" href="#read-a-nexus-hdf5-file">Read a NeXus HDF5 File</a></li>
<li><a class="reference internal" href="#downloads">downloads</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../index.html"
                          title="previous chapter"><span class="section-number">2.1.2. </span>HDF5 in Python</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="../simple_example_write1/index.html"
                          title="next chapter">Write a NeXus HDF5 file</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <p>Have a Question? <a href="https://github.com/nexusformat/definitions/issues/new">Get help</a></p>
    <ul class="this-page-menu">
    <style>
		  .avatar-container {
		    display: flex;
		    align-items: center;
		  }
		
		  .avatar {
		    width: 32px;
		    height: 32px;
		    border-radius: 50%;
		    margin-right: 5px;
		  }
		</style>
		
    
    
		<div class="avatar-container">
      
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
<div id="google_search" style="display: none">
	<hr />
	<h3>Google search</h3>
	<form method="get" action="https://www.google.com/search">
		<table border="0" align="center" cellpadding="0">
			<tr>
				<td>
					<input type="text"   name="q" value="" />
				</td>
			</tr>
			<tr>
				<td align="center" style="font-size:75%">
					<input type="radio"  name="sitesearch" value="" />global
					<input type="radio"  name="sitesearch"
						value="manual.nexusformat.org" 
						checked />NeXus manual
					<input type="submit" value="Go" />
					<br />
				</td>
			</tr>
		</table>
	</form>                                
</div>
<script type="text/javascript">$('#google_search').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../simple_example_write1/index.html" title="Write a NeXus HDF5 file"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="2.1.2. HDF5 in Python"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">nexus v2024.02 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" ><span class="section-number">2. </span>Examples of writing and reading NeXus data files</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">2.1.2. </span>HDF5 in Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Getting started</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../../../copyright.html">Copyright</a> 1996-2024, NIAC, https://www.nexusformat.org.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    </div>
  </body>
</html>