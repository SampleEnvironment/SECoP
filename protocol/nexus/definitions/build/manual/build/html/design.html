


<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>1.2. NeXus Design &#8212; nexus v2024.02 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css?v=87629129" />
    <link rel="stylesheet" type="text/css" href="_static/details_summary_hide.css?v=30df4bca" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" href="_static/blockquote.css" type="text/css" />
    <link rel="stylesheet" href="_static/rubric.css" type="text/css" />
    <script src="_static/documentation_options.js?v=04096e4a"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="next" title="1.2.3.1. Rules for Structuring Information in NeXus Files" href="rules.html" />
    <link rel="prev" title="NAPI: The NeXus Application Programming Interface" href="introduction-napi.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="rules.html" title="1.2.3.1. Rules for Structuring Information in NeXus Files"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introduction-napi.html" title="NAPI: The NeXus Application Programming Interface"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">nexus v2024.02 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="user_manual.html" accesskey="U"><span class="section-number">1. </span>NeXus: User Manual</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">1.2. </span>NeXus Design</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="nexus-design">
<span id="design"></span><h1><span class="section-number">1.2. </span>NeXus Design<a class="headerlink" href="#nexus-design" title="Link to this heading">¶</a></h1>
<p>This chapter actually defines the rules to use for writing valid NeXus files. An explanation of NeXus objects
is followed by the definition of NeXus coordinate systems, the rules for structuring files and the rules for
storing single items of data.</p>
<p>The structure of NeXus files is extremely flexible, allowing the storage both of
simple data sets, such as a single data array and its axes, and also of highly complex
data, such as the simulation results or an entire multi-component instrument. This flexibility
is a necessity as NeXus strives to capture data from a wild variety of applications in X-ray, muSR and
neutron scattering. The flexibility is achieved through a <span class="target" id="index-0"></span>hierarchical
structure, with related <em>fields</em> collected together into <em>groups</em>,
making NeXus files easy to navigate, even without any
documentation. NeXus files are self-describing, and should be easy to understand, at
least by those familiar with the experimental technique.</p>
<section id="nexus-objects-and-terms">
<span id="design-objects"></span><h2><span class="section-number">1.2.1. </span>NeXus Objects and Terms<a class="headerlink" href="#nexus-objects-and-terms" title="Link to this heading">¶</a></h2>
<p>Before discussing the design of NeXus in greater detail it is necessary to define the objects and terms
used by NeXus. These are:</p>
<dl class="simple">
<dt><a class="reference internal" href="#design-groups"><span class="std std-ref">Groups</span></a></dt><dd><p>Levels in the NeXus hierarchy. May contain fields and other groups.</p>
</dd>
<dt><a class="reference internal" href="#design-fields"><span class="std std-ref">Fields</span></a></dt><dd><p>Multidimensional arrays and scalars representing the actual data to be stored.</p>
</dd>
<dt><a class="reference internal" href="#design-attributes"><span class="std std-ref">Attributes</span></a></dt><dd><p>Attributes containing additional metadata can be assigned to groups, fields,
or <a class="reference internal" href="#design-fileattributes"><span class="std std-ref">files</span></a>.</p>
</dd>
<dt><a class="reference internal" href="#design-links"><span class="std std-ref">Links</span></a></dt><dd><p>Elements which point to data stored in another place in the file hierarchy.</p>
</dd>
<dt><a class="reference internal" href="#design-nexusclasses"><span class="std std-ref">NeXus Base Classes</span></a></dt><dd><p>Dictionaries of names possible in the various types of NeXus groups.</p>
</dd>
<dt><a class="reference internal" href="#design-nexusapplications"><span class="std std-ref">NeXus Application Definitions</span></a></dt><dd><p>Describe the minimum content of a NeXus file for a particular usage case.</p>
</dd>
</dl>
<p>In the following sections these elements of NeXus files will be defined in more detail.</p>
<div class="admonition note" id="tree-structure">
<p class="admonition-title">Note</p>
<p>Notation used to describe a NeXus data file</p>
<p>In various places in the NeXus manual, contents of a NeXus
data file are described using a tree structure, such as
in the <a class="reference internal" href="introduction.html#fig-verysimple-structure"><span class="std std-ref">Introduction</span></a>.</p>
<p>The tree syntax is a very condensed version (with high information density) meant to convey the structure of the HDF file.</p>
<ul class="simple">
<li><p>Groups have a <code class="docutils literal notranslate"><span class="pre">/</span></code> appended to their name (with NeXus class name shown).</p></li>
<li><p>Indentation shows membership in the lesser indented parent above.</p></li>
<li><p>Fields have a data type and value appended (for arrays, this may be an abbreviated view).</p></li>
<li><p>Attributes (of groups or fields) are prefixed with <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>.</p></li>
<li><p>NeXus-style links are described with some sort of arrow notation such as <code class="docutils literal notranslate"><span class="pre">--&gt;</span></code>.</p></li>
</ul>
</div>
<section id="groups">
<span id="design-groups"></span><span id="index-1"></span><h3><span class="section-number">1.2.1.1. </span>Groups<a class="headerlink" href="#groups" title="Link to this heading">¶</a></h3>
<p>NeXus files consist of data groups,
which contain fields and/or other
groups to form a <span class="target" id="index-2"></span>hierarchical structure.
This hierarchy is designed to make it
easy to navigate a NeXus file by storing related fields together. Data
groups are identified both by a name, which must be unique within a particular
group, and a class. There can be multiple groups with the same class
but they must have different names (based on the <span class="target" id="index-3"></span>HDF rules).</p>
<p>For the class names used with NeXus data groups the prefix NX is reserved. Thus all NeXus class
names start with NX.</p>
<blockquote>
<div></div></blockquote>
</section>
<section id="fields">
<span id="design-fields"></span><span id="index-4"></span><h3><span class="section-number">1.2.1.2. </span>Fields<a class="headerlink" href="#fields" title="Link to this heading">¶</a></h3>
<p>Fields (also called data fields, data items or data sets)
contain the essential information stored in a NeXus file. They can
be scalar values or multidimensional arrays of a variety of sizes (1-byte,
2-byte, 4-byte, 8-byte) and types (integers, floats, characters). The fields may
store both experimental results (counts, detector angles, etc.), and other
information associated with the experiment (start and end times, user names,
etc.). Fields are identified by their names, which must be unique within the
group in which they are stored.  Some fields have engineering units to be specified.
In some cases, such as <a class="reference internal" href="classes/base_classes/NXdata.html#nxdata-data-field"><span class="std std-ref">/NXdata/DATA</span></a>, a field is
expected to be an array of several dimensions.</p>
<blockquote>
<div><div class="compound">
<p class="rubric">Examples of fields</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">variable</span></code> (<em>NX_NUMBER</em>)</dt><dd><p>Dimension scale defining an axis of the data.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">variable_errors</span></code> (<em>NX_NUMBER</em>)</dt><dd><p>Errors (uncertainties) associated with axis <code class="docutils literal notranslate"><span class="pre">variable</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wavelength</span></code> (<em>NX_FLOAT</em>)</dt><dd><p>wavelength of radiation, <code class="docutils literal notranslate"><span class="pre">units=&quot;NX_FLOAT&quot;</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">chemical_formula</span></code> (<em>NX_CHAR</em>)</dt><dd><p>The chemical formula specified using CIF conventions.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code> (<em>NX_CHAR</em>)</dt><dd><p>Name of user responsible for this entry.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code> (<em>NX_NUMBER</em>)</dt><dd><p>Data values from the detector, <code class="docutils literal notranslate"><span class="pre">units=&quot;NX_ANY&quot;</span></code>.</p>
</dd>
</dl>
</div>
</div></blockquote>
<p>See the sections <a class="reference internal" href="nxdl-types.html#nxdl-types"><span class="std std-ref">Data Types allowed in NXDL specifications</span></a> and <a class="reference internal" href="nxdl-types.html#nxdl-units"><span class="std std-ref">Unit Categories allowed in NXDL specifications</span></a> for complete lists of
the data types and engineering units types, respectively.</p>
<p>In the case of streaming data acquisition, when time-stamped values of data are collected, fields can be replaced with <a class="reference internal" href="classes/base_classes/NXlog.html#nxlog"><span class="std std-ref">NXlog</span></a> structures of
the same name. For example, if time stamped data for wavelength is being streamed, wavelength would not be an array but a <a class="reference internal" href="classes/base_classes/NXlog.html#nxlog"><span class="std std-ref">NXlog</span></a> structure.</p>
</section>
<section id="attributes">
<span id="design-attributes"></span><span id="index-5"></span><h3><span class="section-number">1.2.1.3. </span>Attributes<a class="headerlink" href="#attributes" title="Link to this heading">¶</a></h3>
<p>Attributes are extra (meta-)information that are associated with particular
groups or fields. They are used to annotate data, e.g. with physical
<span class="target" id="index-6"></span>units or calibration offsets, and may be scalar numbers or character
strings. In addition, NeXus uses attributes to identify
<span class="target" id="index-7"></span>plottable data
and their axes, etc. In a <a class="reference internal" href="#tree-structure"><span class="std std-ref">tree structure</span></a>,
an attribute is usually shown with a <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> prefix, such as <code class="docutils literal notranslate"><span class="pre">&#64;units</span></code>.
A description of some of the many possible
attributes can be found in the next table:</p>
<blockquote>
<div><div class="compound">
<p class="rubric">Examples of attributes</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">units</span></code> (<em>NX_CHAR</em>)</dt><dd><p><span class="target" id="index-8"></span>Data units given as character strings,
must conform to the NeXus units standard.   See the
<a class="reference internal" href="datarules.html#design-units"><span class="std std-ref">NeXus Data Units</span></a> section for details.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">signal</span></code> (<em>NX_CHAR</em>)</dt><dd><p>Defines which data set contains the signal
to be <span class="target" id="index-9"></span>plotted.
Use <code class="docutils literal notranslate"><span class="pre">signal=&quot;{dataset_name}&quot;</span></code> where <code class="docutils literal notranslate"><span class="pre">{dataset_name}</span></code>
is the name of a field (or link to a field) in the <a class="reference internal" href="classes/base_classes/NXdata.html#nxdata"><span class="std std-ref">NXdata</span></a> group.
The field referred to by the <em>signal</em> attribute
might be referred to as the “<span class="target" id="index-10"></span>signal data”.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">long_name</span></code> (<em>NX_CHAR</em>)</dt><dd><p>Defines title of signal data or axis label of dimension scale</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">calibration_status</span></code> (<em>NX_CHAR</em>)</dt><dd><p>Defines status of data value - set to <code class="docutils literal notranslate"><span class="pre">Nominal</span></code> or <code class="docutils literal notranslate"><span class="pre">Measured</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data_offset</span></code> (<em>NX_INT</em>)</dt><dd><p>Rank values of offsets to use for each
<span class="target" id="index-11"></span>dimension
if the data is not in C storage order</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">interpretation</span></code> (<em>NX_CHAR</em>)</dt><dd><p>Describes how to display the data.
<code class="docutils literal notranslate"><span class="pre">rgba</span></code>, <code class="docutils literal notranslate"><span class="pre">hsla</span></code> and <code class="docutils literal notranslate"><span class="pre">cmyk</span></code> are (<cite>n x m x 4</cite>) arrays, where the
4 channels are the colour channels appropriately. If the image data
does not contain an alpha channel, then the array should simply be
(<cite>n x m x 3</cite>).
Allowed values include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scalar</span></code> (0-D data)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scaler</span></code> DEPRECATED, use <code class="docutils literal notranslate"><span class="pre">scalar</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">spectrum</span></code> (1-D data)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">image</span></code> (2-D data)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rgb-image</span></code> (3-D data)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rgba-image</span></code> (3-D data)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hsl-image</span></code> (3-D data)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hsla-image</span></code> (3-D data)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmyk-image</span></code> (3-D data)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vertex</span></code> (3-D data)</p></li>
</ul>
</dd>
</dl>
</div>
</div></blockquote>
</section>
<section id="file-attributes">
<span id="design-fileattributes"></span><span id="index-12"></span><h3><span class="section-number">1.2.1.4. </span>File attributes<a class="headerlink" href="#file-attributes" title="Link to this heading">¶</a></h3>
<p>Finally, some attributes are defined at file level.
They are specified in the base class <a class="reference internal" href="classes/base_classes/NXroot.html#nxroot"><span class="std std-ref">NXroot</span></a>.</p>
</section>
<section id="links">
<span id="design-links"></span><h3><span class="section-number">1.2.1.5. </span>Links<a class="headerlink" href="#links" title="Link to this heading">¶</a></h3>
<aside class="sidebar" id="index-13">
<p class="sidebar-title">Python h5py code to make NeXus links</p>
<p>The section titled <a class="reference internal" href="examples/python/index.html#example-python"><span class="std std-ref">HDF5 in Python</span></a> provides example
python code to create links (both internal and external)
in NeXus data files.  See the routines:</p>
<ul class="simple">
<li><p><strong>{hdf5_object}._id.link()</strong></p></li>
<li><p><strong>h5py.ExternalLink()</strong></p></li>
</ul>
</aside>
<p>Links are pointers to existing data somewhere else.
The concept is very much like
symbolic links in a unix filesystem.
The NeXus definition sometimes requires to
have access to the same data in different groups
in the same file. For example: detector data is stored in the
<a class="reference internal" href="classes/base_classes/NXinstrument.html#nxinstrument"><span class="std std-ref">NXinstrument</span></a>/<a class="reference internal" href="classes/base_classes/NXdetector.html#nxdetector"><span class="std std-ref">NXdetector</span></a> group
but may be needed in <a class="reference internal" href="classes/base_classes/NXdata.html#nxdata"><span class="std std-ref">NXdata</span></a> for automatic plotting.
Rather then replicating the data, NeXus uses
links in such situations. See the <a class="reference internal" href="#fig-data-linking"><span class="std std-ref">figure</span></a> for
a more descriptive representation of the concept of linking.</p>
<div class="compound">
<figure class="align-default" id="id15">
<span id="fig-data-linking"></span><a class="reference internal image-reference" href="_images/data-linking.png"><img alt="fig.data-linking" src="_images/data-linking.png" style="width: 60%;" />
</a>
<figcaption>
<p><span class="caption-text">Linking in a NeXus file</span><a class="headerlink" href="#id15" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div>
<p id="index-14">NeXus links are HDF5 hard links with an additional <code class="docutils literal notranslate"><span class="pre">target</span></code> attribute.
The <code class="docutils literal notranslate"><span class="pre">target</span></code> attribute is added <a class="footnote-reference brackets" href="#id4" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> for NeXus to distinguish the HDF5 path to the
<em>original</em> <a class="footnote-reference brackets" href="#id7" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> dataset.  The value of the <code class="docutils literal notranslate"><span class="pre">target</span></code> attribute is the HDF5
path <a class="footnote-reference brackets" href="#absolute-address" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> to the <em>original</em> dataset.</p>
<blockquote>
<div><aside class="footnote-list brackets">
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>When using the NAPI, the <code class="docutils literal notranslate"><span class="pre">target</span></code> attribute is added automatically.
When the NAPI is not used to write NeXus/HDF5 files, this attribute must
be added.  Here are the steps to follow:</p>
<ol class="arabic simple">
<li><p>Get the HDF5 reference ID of the source item (<em>field</em>, <em>group</em>, or <em>link</em>) to be linked.</p></li>
<li><p>If the ID does not have a <code class="docutils literal notranslate"><span class="pre">target</span></code> attribute defined:
#. Get the absolute HDF5 address <a class="footnote-reference brackets" href="#absolute-address" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> of the ID.
#. Create a <code class="docutils literal notranslate"><span class="pre">target</span></code> attribute for the ID.
#. Set the <code class="docutils literal notranslate"><span class="pre">target</span></code> attribute’s value to the absolute HDF5 address of the ID.</p></li>
<li><p>Create an HDF5 hard link <a class="footnote-reference brackets" href="#hdf5-hard-link" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>
to the ID at the desired (new) HDF5 address.</p></li>
</ol>
</aside>
<aside class="footnote brackets" id="id7" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>The notion of an <em>original</em> dataset with regard to links is
a NeXus abstraction.  In truth, HDF5 makes no distinction which is
the <em>original</em> dataset.  But, when the file is viewed with a tool
such as <em>h5dump</em>, confusion often occurs over which dataset is
original and which is a link to the original.  Actually, both HDF5 paths
point to the exact, same dataset which exists at a specific offset in the HDF5 file.</p>
<p>See the <a class="reference internal" href="faq.html#faq"><span class="std std-ref">Frequently Asked Questions</span></a> question: <strong>I’m using links to place data in two places.
Which one should be the data and which one is the link?</strong></p>
</aside>
<aside class="footnote brackets" id="absolute-address" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id3">1</a>,<a role="doc-backlink" href="#id5">2</a>)</span>
<p>When using the <code class="docutils literal notranslate"><span class="pre">target</span></code> attribute,
<strong>always</strong> specify the HDF5 address
as an <em>absolute*</em> address (starts from the HDF5 root,
such as: <code class="docutils literal notranslate"><span class="pre">/entry/instrument/detector/polar_angle</span></code>)
rather than a <strong>relative</strong> address (starting from the current group,
such as: <code class="docutils literal notranslate"><span class="pre">detector/polar_angle</span></code>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">target</span></code> attribute does not work for
<a class="reference internal" href="#design-external-file-link"><span class="std std-ref">external file links</span></a>.
The NIAC is working at resolving the technical limitations</p>
</div>
</aside>
<aside class="footnote brackets" id="hdf5-hard-link" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">4</a><span class="fn-bracket">]</span></span>
<p>HDF5 hard link:
<a class="reference external" href="https://portal.hdfgroup.org/display/HDF5/H5L_CREATE_HARD">https://portal.hdfgroup.org/display/HDF5/H5L_CREATE_HARD</a></p>
</aside>
</aside>
</div></blockquote>
<p id="index-15">NeXus links are best understood with an example.
The canonical location (expressed as a NeXus class path) to store wavelength
(see <a class="reference internal" href="strategies.html#strategies-wavelength"><span class="std std-ref">Strategies: The wavelength</span></a>) has been:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">NXentry</span><span class="o">/</span><span class="n">NXinstrument</span><span class="o">/</span><span class="n">NXcrystal</span><span class="o">/</span><span class="n">wavelength</span>
</pre></div>
</div>
<p>An alternative location for this field makes sense to many,
especially those not using a crystal to create monochromatic radiation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">NXentry</span><span class="o">/</span><span class="n">NXinstrument</span><span class="o">/</span><span class="n">NXmonochromator</span><span class="o">/</span><span class="n">wavelength</span>
</pre></div>
</div>
<p>These two fields might be hard linked together in a NeXus data file
(using HDF5 paths such <code class="docutils literal notranslate"><span class="pre">/entry/instrument</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry</span><span class="p">:</span><span class="n">NXentry</span>
    <span class="o">...</span>
    <span class="n">instrument</span><span class="p">:</span><span class="n">NXinstrument</span>
        <span class="o">...</span>
        <span class="n">crystal</span><span class="p">:</span><span class="n">NXcrystal</span>
            <span class="o">...</span>
            <span class="n">wavelength</span><span class="p">:</span><span class="n">NX_FLOAT</span> <span class="o">=</span> <span class="mf">154.</span>
                <span class="nd">@target</span><span class="o">=</span><span class="s2">&quot;/entry/instrument/crystal/wavelength&quot;</span>
                <span class="nd">@units</span><span class="o">=</span><span class="s2">&quot;pm&quot;</span>
        <span class="o">...</span>
        <span class="n">monochromator</span><span class="p">:</span><span class="n">NXmonochromator</span>
            <span class="o">...</span>
            <span class="n">wavelength</span> <span class="o">--&gt;</span> <span class="s2">&quot;/entry/instrument/crystal/wavelength&quot;</span>
</pre></div>
</div>
<p>It is possible that the linked field or group has a
different name than the original.  One obvious use of this capability
is to adapt to a specific requirement of an application definition.
For example, suppose some application definition required the
specification of wavelength as a field named <em>lambda</em> in the entry group.
This requirement can be satisifed easily:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry</span><span class="p">:</span><span class="n">NXentry</span>
    <span class="o">...</span>
    <span class="n">instrument</span><span class="p">:</span><span class="n">NXinstrument</span>
        <span class="o">...</span>
        <span class="n">crystal</span><span class="p">:</span><span class="n">NXcrystal</span>
            <span class="o">...</span>
            <span class="n">wavelength</span><span class="p">:</span><span class="n">NX_FLOAT</span> <span class="o">=</span> <span class="mf">154.</span>
                <span class="nd">@target</span><span class="o">=</span><span class="s2">&quot;/entry/instrument/crystal/wavelength&quot;</span>
                <span class="nd">@units</span><span class="o">=</span><span class="s2">&quot;pm&quot;</span>
        <span class="o">...</span>
        <span class="n">monochromator</span><span class="p">:</span><span class="n">NXmonochromator</span>
            <span class="o">...</span>
            <span class="n">wavelength</span> <span class="o">--&gt;</span> <span class="s2">&quot;/entry/instrument/crystal/wavelength&quot;</span>
    <span class="o">...</span>
    <span class="k">lambda</span> <span class="o">--&gt;</span> <span class="s2">&quot;/entry/instrument/crystal/wavelength&quot;</span>
</pre></div>
</div>
<section id="external-file-links">
<span id="index-16"></span><span id="design-external-file-link"></span><h4>External File Links<a class="headerlink" href="#external-file-links" title="Link to this heading">¶</a></h4>
<p>NeXus also allows for links to external files.
Consider the case where an instrument uses a detector with
a closed-system software support provided by a commercial vendor.
This system writes its images into a NeXus HDF5 file.
The instrument’s data acquisition system writes instrument metadata
into another NeXus HDF5 file.  In this case, the instrument metadata file
might link to the data in the detector image file.
Here is an example (from Diamond Light Source)
showing an external file link in HDF5:</p>
<blockquote>
<div><div class="compound">
<p class="rubric">Example of linking to data in an external HDF5 file</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> EXTERNAL_LINK &quot;data&quot; {
<span class="linenos">2</span>        TARGETFILE &quot;/dls/i22/data/2012/sm7594-1/i22-69201-Pilatus2M.h5&quot;
<span class="linenos">3</span>        TARGETPATH &quot;entry/instrument/detector/data&quot;
<span class="linenos">4</span> }
</pre></div>
</div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The NAPI code <a class="footnote-reference brackets" href="#id9" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a> makes no <code class="docutils literal notranslate"><span class="pre">target</span></code> attribute assignment for
links to external files.  It is best to avoid using the
<code class="docutils literal notranslate"><span class="pre">target</span></code> attribute with external file links.
The NIAC is working at resolving the technical limitations</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id9" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">5</a><span class="fn-bracket">]</span></span>
<p><code class="docutils literal notranslate"><span class="pre">NX5nativeexternallink()</span></code>:
<a class="reference external" href="https://github.com/nexusformat/code/blob/fe8ddd287ee33961982931e2016cc25f76f95edd/src/napi5.c#L2248">https://github.com/nexusformat/code/blob/fe8ddd287ee33961982931e2016cc25f76f95edd/src/napi5.c#L2248</a></p>
</aside>
</aside>
</div>
<p>The NAPI maintains a group attribute <code class="docutils literal notranslate"><span class="pre">&#64;napimount</span></code> that provides
a URL to a group in another file.  More information about the
<code class="docutils literal notranslate"><span class="pre">&#64;napimount</span></code> attribute is described in the
<em>NeXus Programmers Reference</em>. <a class="footnote-reference brackets" href="#id11" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a></p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id11" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id10">6</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://github.com/nexusformat/code/raw/master/doc/api/NeXusIntern.pdf">https://github.com/nexusformat/code/raw/master/doc/api/NeXusIntern.pdf</a></p>
</aside>
</aside>
</section>
<section id="combining-nexus-links-and-external-file-links">
<span id="index-17"></span><h4>Combining NeXus links and External File Links<a class="headerlink" href="#combining-nexus-links-and-external-file-links" title="Link to this heading">¶</a></h4>
<p>Consider the case described in
<a class="reference internal" href="examples/python/external_example_write/index.html#h5py-example-external-links"><span class="std std-ref">Links to Data in External HDF5 Files</span></a>,
where numerical data are provided in two different HDF5 files and a <em>master</em> NeXus HDF5 file links to
the data through external file links.  HDF5 will not allow hard links to be constructed with these data
objects in the master file.  An error such as <em>Interfile hard links are not allowed</em> (as generated
from h5py) will arise.  This makes sense since there is no such data object in the file.</p>
<p>Instead, it is necessary to make an external file link at each place in the master where external
data is to be represented.</p>
</section>
</section>
<section id="nexus-base-classes">
<span id="design-nexusclasses"></span><h3><span class="section-number">1.2.1.6. </span>NeXus Base Classes<a class="headerlink" href="#nexus-base-classes" title="Link to this heading">¶</a></h3>
<p id="index-19"><span id="index-18"></span>Data groups often describe objects in the experiment (monitors, detectors,
monochromators, etc.), so that the contents (both fields and/or other
groups) comprise the properties of that object. NeXus has defined a set of standard
objects, or <a class="reference internal" href="classes/base_classes/index.html#base-class-definitions"><span class="std std-ref">base classes</span></a>,
out of which a NeXus file can be constructed. Each data group
is identified by a name and a class. The group class defines the type of object
and the properties that it can contain, whereas the group name defines a unique instance
of that class. These classes are
defined in XML using the NeXus Definition Language
<span class="target" id="index-20"></span>(NXDL) format. All NeXus class types adopted by the NIAC <em>must</em>
begin <span class="target" id="index-21"></span>with <code class="docutils literal notranslate"><span class="pre">NX</span></code>.
Classes not adopted by the NIAC <em>must not</em>
start with <code class="docutils literal notranslate"><span class="pre">NX</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>NeXus base classes are the components used to build the
NeXus data structure.</p>
</div>
<p>Not all classes define physical objects. Some refer to logical groupings of
experimental information, such as
<span class="target" id="index-22"></span>plottable data,
sample environment logs, beam profiles, etc.
There can be multiple instances of each class. On
the other hand, a typical NeXus file will only contain a small subset of the
possible classes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The groups, fields, links, and attributes of a base class
definition are all <strong>optional</strong>, with a few particular exceptions in
<code class="docutils literal notranslate"><span class="pre">NXentry</span></code> and <code class="docutils literal notranslate"><span class="pre">NXdata</span></code>.  They are named in the specification
to describe the exact spelling and usage of the term when it appears.</p>
</div>
<p>NeXus base classes are not proper classes in the same sense as used in object oriented programming
languages. In fact the use of the term classes is actually misleading but has established itself during the
development of NeXus. NeXus base classes are rather dictionaries of field names and their meanings
which are permitted in a particular NeXus group implementing the NeXus class. This sounds complicated but
becomes easy if you consider that most NeXus groups describe instrument components. Then for example, a
NXmonochromator base class describes all the possible field names which NeXus allows to be used to describe a
monochromator.</p>
<p>Most NeXus base classes represent instrument components. Some are used as containers to structure information in a
file (<code class="docutils literal notranslate"><span class="pre">NXentry</span></code>, <code class="docutils literal notranslate"><span class="pre">NXcollection</span></code>, <code class="docutils literal notranslate"><span class="pre">NXinstrument</span></code>, <code class="docutils literal notranslate"><span class="pre">NXprocess</span></code>, <code class="docutils literal notranslate"><span class="pre">NXparameters</span></code>).
But there are some base classes which have special uses which need to be mentioned here:</p>
<dl>
<dt><a class="reference internal" href="classes/base_classes/NXdata.html#nxdata"><span class="std std-ref">NXdata</span></a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">NXdata</span></code> is used to identify the default
<span class="target" id="index-23"></span>plottable data.
The notion of a default plot of data is a basic motivation of NeXus
(see <a class="reference internal" href="motivations.html#simpleplotting"><span class="std std-ref">Simple plotting</span></a>).</p>
</dd>
<dt><a class="reference internal" href="classes/base_classes/NXlog.html#nxlog"><span class="std std-ref">NXlog</span></a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">NXlog</span></code> is used to store time stamped data like the log of a temperature controller.
Basically you give a start time,
and arrays with a difference in seconds to the start time and the values read.</p>
</dd>
<dt><a class="reference internal" href="classes/base_classes/NXcollection.html#nxcollection"><span class="std std-ref">NXcollection</span></a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">NXcollection</span></code> is used to gather together any set of terms.
Anything (groups, fields, or attributes) placed in
an <code class="docutils literal notranslate"><span class="pre">NXcollection</span></code> group will not be validated.
One use is to use this as a container class for the various
control system variables from a beamline or instrument.</p>
</dd>
<dt><a class="reference internal" href="classes/base_classes/NXnote.html#nxnote"><span class="std std-ref">NXnote</span></a></dt><dd><p>This group provides a place to store general notes, images, video or
whatever.  A mime type is stored together with a binary blob of data.
Please use this only for auxiliary information, for example an image
of your sample, or a photo of your boss.</p>
</dd>
<dt><a class="reference internal" href="classes/base_classes/NXtransformations.html#nxtransformations"><span class="std std-ref">NXtransformations</span></a></dt><dd><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">NXtransformations</span></code> is used to gather together any set of movable or fixed</dt><dd><p>elements positioning the device described by the class that contains this.
Supercedes <code class="docutils literal notranslate"><span class="pre">NXgeometry</span></code>.</p>
</dd>
</dl>
</dd>
<dt><a class="reference internal" href="classes/base_classes/NXgeometry.html#nxgeometry"><span class="std std-ref">NXgeometry</span></a> (superceded by <a class="reference internal" href="classes/base_classes/NXtransformations.html#nxtransformations"><span class="std std-ref">NXtransformations</span></a>, <a class="footnote-reference brackets" href="#id13" id="id12" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>)</dt><dd><blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">NXgeometry</span></code> and its subgroups <code class="docutils literal notranslate"><span class="pre">NXtranslation</span></code>,
<code class="docutils literal notranslate"><span class="pre">NXorientation</span></code>, <code class="docutils literal notranslate"><span class="pre">NXshape</span></code> are  used to store absolute positions in the
laboratory coordinate system or to define shapes.</p>
</div></blockquote>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id13" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id12">7</a><span class="fn-bracket">]</span></span>
<p>see: <a class="reference external" href="https://github.com/nexusformat/definitions/issues/397">https://github.com/nexusformat/definitions/issues/397</a></p>
</aside>
</aside>
</dd>
</dl>
<p>These groups can appear anywhere in the NeXus hierarchy, where needed. Preferably close to the component they
annotate or in a <code class="docutils literal notranslate"><span class="pre">NXcollection</span></code>. All of the base classes are documented in the reference manual.</p>
<section id="nxdata-facilitates-automatic-plotting">
<span id="nxdata-facilitates-thedefaultplot"></span><h4><code class="docutils literal notranslate"><span class="pre">NXdata</span></code> Facilitates Automatic Plotting<a class="headerlink" href="#nxdata-facilitates-automatic-plotting" title="Link to this heading">¶</a></h4>
<p id="index-24">The most notable special base class (or <em>group</em> in NeXus) is <code class="docutils literal notranslate"><span class="pre">NXdata</span></code>.
<code class="docutils literal notranslate"><span class="pre">NXdata</span></code> is the answer to a basic motivation of NeXus to facilitate
automatic plotting of data.
<code class="docutils literal notranslate"><span class="pre">NXdata</span></code> is designed to contain the main dataset and its associated
dimension scales (axes) of a NeXus data file.
The usage scenario is that an automatic data plotting program just
opens a <code class="docutils literal notranslate"><span class="pre">NXentry</span></code> and then continues to search for any <code class="docutils literal notranslate"><span class="pre">NXdata</span></code>
groups. These <code class="docutils literal notranslate"><span class="pre">NXdata</span></code> groups represent the plottable data.
An algorithm for identifying the default plottable data
is <a class="reference internal" href="datarules.html#find-plottable-data"><span class="std std-ref">presented</span></a> in the
chapter titled <a class="reference internal" href="datarules.html#datarules"><span class="std std-ref">Rules for Storing Data Items in NeXus Files</span></a>.</p>
</section>
<section id="where-to-store-metadata">
<span id="id14"></span><h4>Where to Store Metadata<a class="headerlink" href="#where-to-store-metadata" title="Link to this heading">¶</a></h4>
<p id="index-25">There are many ways to store metadata about your experiments.
Already there are many fields in the various base classes
to store the more common or general metadata, such as wavelength.
(For wavelength, see the <a class="reference internal" href="strategies.html#strategies-wavelength"><span class="std std-ref">Strategies: The wavelength</span></a> section.)</p>
<p>One common scheme is to store the metadata all in one
group.  If the group is to be validated for content,
then there are several possibilities, as shown in the next table:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>base class</p></th>
<th class="head"><p>intent</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="classes/base_classes/NXnote.html#nxnote"><span class="std std-ref">NXnote</span></a></p></td>
<td><p>to store additional information</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="classes/base_classes/NXlog.html#nxlog"><span class="std std-ref">NXlog</span></a></p></td>
<td><p>information that is time-stamped</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="classes/base_classes/NXparameters.html#nxparameters"><span class="std std-ref">NXparameters</span></a></p></td>
<td><p>parameters for processing or analysis</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="classes/base_classes/NXcollection.html#nxcollection"><span class="std std-ref">NXcollection</span></a></p></td>
<td><p>to store <em>any</em> unvalidated content</p></td>
</tr>
</tbody>
</table>
<p>If the content of the metadata group is to be excluded from validation,
then store it in a <a class="reference internal" href="classes/base_classes/NXcollection.html#nxcollection"><span class="std std-ref">NXcollection</span></a> group.</p>
</section>
</section>
<section id="nexus-application-definitions">
<span id="design-nexusapplications"></span><h3><span class="section-number">1.2.1.7. </span>NeXus Application Definitions<a class="headerlink" href="#nexus-application-definitions" title="Link to this heading">¶</a></h3>
<p>The objects described so far provide us with the means to store data from a wide variety of instruments,
simulations, or processed data as resulting from data analysis. But NeXus strives to express strict standards for
certain applications of NeXus, too. The tool which NeXus uses for the expression of such strict standards is the NeXus
<a class="reference internal" href="classes/applications/index.html#application-definitions"><span class="std std-ref">Application Definition</span></a>.
A NeXus Application Definition describes which groups and data items have to be present in
a file in order to properly describe an application of NeXus. For example for describing  a powder diffraction
experiment.
An application definition may also declare terms which are optional in the data file.
Typically an application definition will contain only a small subset of the many groups and fields
defined in NeXus. NeXus application definitions are also expressed in the NeXus Definition Language (NXDL). A tool exists
which allows one to validate a NeXus file against a given application definition.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>NeXus application definitions define the <em>minimum required</em> information
necessary to satisfy data analysis or other data processing.</p>
</div>
<p>Another way to look at a NeXus application definition is as a
contract between a file producer (writer) and a file consumer (reader).</p>
<blockquote>
<div><p>The contract reads:
<em>If you write your files following a particular NeXus application definition,
I can process these files with my software.</em></p>
</div></blockquote>
<p>Yet another way to look at a NeXus application definition is to understand it as an interface definition
between data files and the software which uses this file. Much like an interface in the Java or other modern
object oriented programming languages.</p>
<p>In contrast to NeXus base classes, NeXus supports inheritance in application definitions.</p>
<p>Please note that a NeXus Application Definition will only define the bare minimum of data necessary to perform
common analysis with data. Practical files will nearly always contain more data. One of the beauties of NeXus is
that it is always possible to add more data to a file without breaking its compliance with its application definition.</p>
</section>
</section>
<section id="nexus-geometry">
<span id="design-geometry"></span><span id="index-26"></span><h2><span class="section-number">1.2.2. </span>NeXus Geometry<a class="headerlink" href="#nexus-geometry" title="Link to this heading">¶</a></h2>
<p>NeXus supports description of the shape, position and orientation of objects in
<a class="reference internal" href="#design-coordinatesystem"><span class="std std-ref">The NeXus Coordinate System</span></a>. Position and
orientation can be defined as <a class="reference internal" href="#coordinatetransformations"><span class="std std-ref">Coordinate Transformations</span></a> using the
<a class="reference internal" href="classes/base_classes/NXtransformations.html#nxtransformations"><span class="std std-ref">NXtransformations</span></a> class. <a class="reference internal" href="#shapedescriptions"><span class="std std-ref">Shape Descriptions</span></a> use the <a class="reference internal" href="classes/base_classes/NXoff_geometry.html#nxoff-geometry"><span class="std std-ref">NXoff_geometry</span></a>
or <a class="reference internal" href="classes/base_classes/NXcylindrical_geometry.html#nxcylindrical-geometry"><span class="std std-ref">NXcylindrical_geometry</span></a> class.</p>
<p>You may come across old files which use <a class="reference internal" href="#legacygeometrydescriptions"><span class="std std-ref">Legacy Geometry Descriptions</span></a>.</p>
<section id="the-nexus-coordinate-system">
<span id="design-coordinatesystem"></span><h3><span class="section-number">1.2.2.1. </span>The NeXus Coordinate System<a class="headerlink" href="#the-nexus-coordinate-system" title="Link to this heading">¶</a></h3>
<p id="index-27">The NeXus coordinate system is shown <a class="reference internal" href="#fig-nexus-coord"><span class="std std-ref">below</span></a>. Note that
it is the same as that used by <em>McStas</em> (<a class="reference external" href="http://mcstas.org">http://mcstas.org</a>). This choice is
arbitrary and any other choice should be possible as long as it is
used consistently and application code that reads NeXus files does not assume
any prior knowledge of the chosen coordinate system.</p>
<div class="compound">
<blockquote id="fig-nexus-coord">
<div><figure class="align-default" id="id16">
<a class="reference internal image-reference" href="_images/translation-orientation-geometry-2.png"><img alt="fig.coord.detector.view" src="_images/translation-orientation-geometry-2.png" style="width: 33%;" />
</a>
<figcaption>
<p><span class="caption-text">NeXus coordinate system, as viewed from detector</span><a class="headerlink" href="#id16" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The NeXus definition of <em>+z</em> is opposite to that
in the <span class="target" id="index-28"></span>IUCr
International Tables for Crystallography, volume G.</p>
</div>
</section>
<section id="coordinate-transformations">
<span id="coordinatetransformations"></span><h3><span class="section-number">1.2.2.2. </span>Coordinate Transformations<a class="headerlink" href="#coordinate-transformations" title="Link to this heading">¶</a></h3>
<p id="index-29">In the recommended way of dealing with geometry NeXus uses a series of
<span class="target" id="index-30"></span>transformations to place objects in space.
In this world view, the absolute position of a component or a detector pixel with respect to
the laboratory coordinate system is calculated by applying a series of translations and
rotations. Thus a rotation or translation operation transforms the whole coordinate system
and gives rise to a new local coordinate system. These transformations between coordinate
systems are mathematical operations and can be expressed as matrices and their combination
as matrix multiplication. A very important aspect is that the order of application of the
individual operations <em>does</em> matter. The mathematics behind this is well known and used in
such applications such as industrial robot control, flight dynamics and
computer games. The beauty in this comes from the fact that the operations to apply map easily
to instrument settings and constants. It is also easy to analyze the contribution of each individual
operation: this can be studied under the condition that all other operations are at a zero setting.</p>
<p>In order to use coordinate transformations, several pieces of information need to be known:</p>
<blockquote>
<div><dl class="simple">
<dt><strong>Type</strong></dt><dd><p>The type of operation: rotation or translation</p>
</dd>
<dt><strong>Direction</strong></dt><dd><p>The direction of the translation or the direction of the rotation axis</p>
</dd>
<dt><strong>Value</strong></dt><dd><p>The angle of rotation or the length of the translation</p>
</dd>
<dt><strong>Order</strong></dt><dd><p>The order of operations to apply to move a component into its place.</p>
</dd>
</dl>
</div></blockquote>
<section id="coordinate-transformation-field-and-attributes">
<h4>Coordinate Transformation Field And Attributes<a class="headerlink" href="#coordinate-transformation-field-and-attributes" title="Link to this heading">¶</a></h4>
<p>NeXus chooses to encode information about each transformation as a field in an <code class="docutils literal notranslate"><span class="pre">NXtransformations</span></code>
group in the following way:</p>
<blockquote>
<div><dl id="index-31">
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code></dt><dd><p>This is represented in the actual data of the field or the <strong>value</strong> of the
transformation. Its actual name should relate to the physical device used to
effect the transformation.</p>
<p>The coordinate transformation attributes are:</p>
<blockquote>
<div><dl class="simple" id="index-32">
<dt><code class="docutils literal notranslate"><span class="pre">transformation_type</span></code></dt><dd><p>This specifies the <strong>type</strong> of transformation and is either <em>rotation</em>
or <em>translation</em> and describes the kind of operation performed</p>
</dd>
</dl>
<dl class="simple" id="index-33">
<dt><code class="docutils literal notranslate"><span class="pre">vector</span></code> (<em>NX_NUMBER</em>)</dt><dd><p>This is a set of 3 values forming a unit vector for <strong>direction</strong> that
describes the components of either the direction of the rotation axis or
the direction along which the translation happens.</p>
</dd>
</dl>
<dl class="simple" id="index-34">
<dt><code class="docutils literal notranslate"><span class="pre">offset</span></code> (<em>NX_NUMBER</em>)</dt><dd><p>This is a set of 3 values forming the offset vector for a translation to apply
before applying the operation of the actual transformation. Without this offset
attribute, additional virtual translations would need to be introduced in order
to encode mechanical offsets in the axis.</p>
</dd>
</dl>
<dl id="index-35">
<dt><code class="docutils literal notranslate"><span class="pre">depends_on</span></code></dt><dd><p>The <strong>order</strong> is encoded through this attribute. The value is the name of the
transformation upon which the current transformation depends on.</p>
<p>As each transformation represents possible motion by a physical device, this
dependency expresses the attachment order; thus, the current device is attached
to (or mounted on) the next device referred to by the attribute.</p>
<p>Allowed values for depends_on are:</p>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">.</span></code></dt><dd><p>A dot ends the depends_on chain</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>The name of a field within the enclosing group</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dir/name</span></code></dt><dd><p>The name of a field further along the path</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">/dir/dir/name</span></code></dt><dd><p>An absolute path to a field in another group</p>
</dd>
</dl>
</div></blockquote>
<p>In addition, for each beamline component, there is a <code class="docutils literal notranslate"><span class="pre">depends_on</span></code> attribute
that points to the field at the head of the axis dependency chain. For example,
consider an <span class="target" id="index-36"></span>eulerian cradle as used on a <span class="target" id="index-37"></span>four-circle diffractometer.
Such a cradle has a dependency chain of <code class="docutils literal notranslate"><span class="pre">phi:chi:rotation_angle</span></code>. Then
the <code class="docutils literal notranslate"><span class="pre">depends_on</span></code> field in <a class="reference internal" href="classes/base_classes/NXsample.html#nxsample"><span class="std std-ref">NXsample</span></a> would have the value <code class="docutils literal notranslate"><span class="pre">phi</span></code>.</p>
<div class="compound">
<p class="rubric">NeXus Transformation encoding</p>
<p id="table-eulercif">Transformation encoding for an eulerian cradle on a four-circle diffractometer</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>  sample:NXsample
<span class="linenos"> 2</span>    transforms:NXtransformations
<span class="linenos"> 3</span>      rotation_angle
<span class="linenos"> 4</span>        @transformation_type=rotation
<span class="linenos"> 5</span>        @vector=0,1,0
<span class="linenos"> 6</span>        @offset=0,0,0
<span class="linenos"> 7</span>        @depends_on=.
<span class="linenos"> 8</span>      chi
<span class="linenos"> 9</span>        @transformation_type=rotation
<span class="linenos">10</span>        @vector=0,0,1
<span class="linenos">11</span>        @offset=0,0,0
<span class="linenos">12</span>        @depends_on=rotation_angle
<span class="linenos">13</span>      phi
<span class="linenos">14</span>        @transformation_type=rotation
<span class="linenos">15</span>        @vector=0,1,0
<span class="linenos">16</span>        @offset=0,0,0
<span class="linenos">17</span>        @depends_on=chi
<span class="linenos">18</span>    depends_on 
<span class="linenos">19</span>      transforms/phi
</pre></div>
</div>
</div>
</dd>
</dl>
</div></blockquote>
</dd>
</dl>
</div></blockquote>
<p>The type and direction of the NeXus standard operations is documented below
in the table: <a class="reference internal" href="#tb-table-transform"><span class="std std-ref">Actions of standard NeXus fields</span></a>.
The rule is to always give the attributes to make perfectly clear how the axes work. The <span class="target" id="index-38"></span>CIF scheme
also allows to store and use arbitrarily named axes in a NeXus file.</p>
<p>The CIF scheme (see <a class="reference internal" href="classes/base_classes/NXtransformations.html#nxtransformations"><span class="std std-ref">NXtransformations</span></a>) is the preferred method
for expressing geometry in NeXus.</p>
<div class="compound">
<p class="rubric" id="tb-table-transform">Actions of standard NeXus fields</p>
<p><a class="reference internal" href="#tb-table-transform"><span class="std std-ref">Transformation Actions</span></a></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Field Name</p></th>
<th class="head"><p>transformation_type</p></th>
<th class="head"><p>vector</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>polar_angle</p></td>
<td><p>rotation</p></td>
<td><p>0 1 0</p></td>
</tr>
<tr class="row-odd"><td><p>azimuthal_angle</p></td>
<td><p>rotation</p></td>
<td><p>0 0 1</p></td>
</tr>
<tr class="row-even"><td><p>meridional_angle</p></td>
<td><p>rotation</p></td>
<td><p>1 0 0</p></td>
</tr>
<tr class="row-odd"><td><p>distance</p></td>
<td><p>translation</p></td>
<td><p>0 0 1</p></td>
</tr>
<tr class="row-even"><td><p>height</p></td>
<td><p>translation</p></td>
<td><p>0 1 0</p></td>
</tr>
<tr class="row-odd"><td><p>x_translation</p></td>
<td><p>translation</p></td>
<td><p>1 0 0</p></td>
</tr>
<tr class="row-even"><td><p>chi</p></td>
<td><p>rotation</p></td>
<td><p>0 0 1</p></td>
</tr>
<tr class="row-odd"><td><p>phi</p></td>
<td><p>rotation</p></td>
<td><p>0 1 0</p></td>
</tr>
</tbody>
</table>
</div>
<p>For the NeXus spherical coordinate system (described in the legacy section below), the order is implicit and is given in the next example.</p>
<blockquote>
<div><div class="compound">
<p class="rubric">implicit order of NeXus spherical coordinate system</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>azimuthal_angle:polar_angle:distance
</pre></div>
</div>
</div>
</div></blockquote>
<p>This is also a nice example of the application of transformation matrices:</p>
<ol class="arabic simple">
<li><p>You first apply <code class="docutils literal notranslate"><span class="pre">azimuthal_angle</span></code> as a rotation
around <em>z</em>.  This rotates the whole coordinate out of the plane.</p></li>
<li><p>Then you apply <code class="docutils literal notranslate"><span class="pre">polar_angle</span></code> as a rotation around
<em>y</em> in the tilted coordinate system.</p></li>
<li><p>This also moves the direction of the <em>z</em> vector.
Along which you translate the component to place by distance.</p></li>
</ol>
</section>
</section>
<section id="shape-descriptions">
<span id="shapedescriptions"></span><h3><span class="section-number">1.2.2.3. </span>Shape Descriptions<a class="headerlink" href="#shape-descriptions" title="Link to this heading">¶</a></h3>
<section id="nxoff-geometry">
<h4><code class="docutils literal notranslate"><span class="pre">NXoff_geometry</span></code><a class="headerlink" href="#nxoff-geometry" title="Link to this heading">¶</a></h4>
<p>The shape of instrument components can be described using the <a class="reference internal" href="classes/base_classes/NXoff_geometry.html#nxoff-geometry"><span class="std std-ref">NXoff_geometry</span></a>
class. <code class="docutils literal notranslate"><span class="pre">NXoff_geometry</span></code> is a polygon-based description, based on the open OFF format.
Conversion between OFF files and the NeXus description is straightforward. This is
beneficial as existing tools can use, view or manipulate the geometry in OFF files.
CAD software, for example <a class="reference external" href="https://www.freecadweb.org/">FreeCAD</a>, can be used to
define the geometry. 3D rendering tools such as <a class="reference external" href="http://www.geomview.org/">Geomview</a>
can be used to view the geometry. <a class="reference external" href="http://www.mcstas.org/">McStas</a> can use OFF
files to define the shape of components for scattering simulations.</p>
<p>The example OFF file shown below defines a cube. The first line containing
numbers defines: the number of vertices, the number of faces (polygons) making
up the model’s surface, and the number of edges in the mesh. Note, the number of
edges must be present but does not need to be correct
(<a class="reference external" href="http://www.geomview.org/docs/html/OFF.html">http://www.geomview.org/docs/html/OFF.html</a>).</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>OFF
<span class="linenos"> 2</span>#  cube.off
<span class="linenos"> 3</span>#  A cube
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>8 6 12
<span class="linenos"> 6</span>1.0   0.0   1.0
<span class="linenos"> 7</span>0.0   1.0   1.0
<span class="linenos"> 8</span>-1.0   0.0   1.0
<span class="linenos"> 9</span>0.0  -1.0   1.0
<span class="linenos">10</span>1.0   0.0  0.0
<span class="linenos">11</span>0.0   1.0  0.0
<span class="linenos">12</span>-1.0   0.0  0.0
<span class="linenos">13</span>0.0  -1.0  0.0
<span class="linenos">14</span>4  0 1 2 3  
<span class="linenos">15</span>4  7 4 0 3  
<span class="linenos">16</span>4  4 5 1 0  
<span class="linenos">17</span>4  5 6 2 1  
<span class="linenos">18</span>4  3 2 6 7  
<span class="linenos">19</span>4  6 5 4 7
</pre></div>
</div>
<p>Following the initial line are the xyz coordinates of each vertex, followed
by the list of faces. Each line defining a face starts with the number of
vertices in that face followed by the sequence number of the composing vertices,
indexed from zero. The vertex indices form a winding order by defining the face
normal by the right-hand rule. The number of vertices in each face need not be
constant; a mesh can comprise of polygons of many different orders.</p>
<p>The list of vertices in an OFF file maps directly to the <code class="docutils literal notranslate"><span class="pre">vertices</span></code> dataset in
the <a class="reference internal" href="classes/base_classes/NXoff_geometry.html#nxoff-geometry"><span class="std std-ref">NXoff_geometry</span></a> class. The vertex indices of the face list in the OFF
file occupy the <code class="docutils literal notranslate"><span class="pre">winding_order</span></code> dataset of the NeXus class, however the list
is flattened to 1D in order to avoid a ragged-edged dataset, which are not
easy to work with using HDF libraries. A <code class="docutils literal notranslate"><span class="pre">faces</span></code> dataset contains the position
of the first entry in <code class="docutils literal notranslate"><span class="pre">winding_order</span></code> for each face. The <code class="docutils literal notranslate"><span class="pre">NXoff_geometry</span></code>
equivalent of the OFF cube example is shown below.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>shape : NXoff_geometry
<span class="linenos"> 2</span>  @NX_class = &quot;NXoff_geometry&quot;
<span class="linenos"> 3</span>  vertices =
<span class="linenos"> 4</span>    1.0,   0.0,   1.0
<span class="linenos"> 5</span>    0.0,   1.0 ,  1.0
<span class="linenos"> 6</span>    -1.0,  0.0,   1.0
<span class="linenos"> 7</span>    0.0,   -1.0,  1.0
<span class="linenos"> 8</span>    1.0,   0.0,   0.0
<span class="linenos"> 9</span>    0.0,   1.0,   0.0
<span class="linenos">10</span>    -1.0,  0.0,   0.0
<span class="linenos">11</span>    0.0,   -1.0,  0.0
<span class="linenos">12</span>  faces =
<span class="linenos">13</span>    0, 4, 8, 12, 16, 20
<span class="linenos">14</span>  winding_order =
<span class="linenos">15</span>    0, 1, 2, 3, 7, 4, 0, 3, 4, 5, 1, 0, 5, 6, 2, 1, 3, 2, 6, 7, 6, 5, 4, 7
</pre></div>
</div>
</section>
<section id="nxcylindrical-geometry">
<h4><code class="docutils literal notranslate"><span class="pre">NXcylindrical_geometry</span></code><a class="headerlink" href="#nxcylindrical-geometry" title="Link to this heading">¶</a></h4>
<p>Although the polygon-based description of <a class="reference internal" href="classes/base_classes/NXoff_geometry.html#nxoff-geometry"><span class="std std-ref">NXoff_geometry</span></a> is very flexible,
it is not ideal for curved shapes when high precision is required since a very
large number of vertices may be necessary. A common example of this is when
describing helium tube, neutron detectors. <a class="reference internal" href="classes/base_classes/NXcylindrical_geometry.html#nxcylindrical-geometry"><span class="std std-ref">NXcylindrical_geometry</span></a> provides
a more concise method of defining shape for such cases.</p>
<p>Like <code class="docutils literal notranslate"><span class="pre">NXoff_geometry</span></code>, <code class="docutils literal notranslate"><span class="pre">NXcylindrical_geometry</span></code> contains a <code class="docutils literal notranslate"><span class="pre">vertices</span></code>
dataset. The indices of three vertices (<strong>A</strong>, <strong>B</strong>, <strong>C</strong> in <a class="reference internal" href="#fig-cylinder-3-points"><span class="std std-ref">Cylinder definition with three vertices</span></a>) in the <code class="docutils literal notranslate"><span class="pre">vertices</span></code> dataset are used to
define each cylinder in the <code class="docutils literal notranslate"><span class="pre">cylinders</span></code> dataset.</p>
<div class="compound">
<figure class="align-center" id="id17">
<span id="fig-cylinder-3-points"></span><a class="reference internal image-reference" href="_images/cylinder_3_points.png"><img alt="fig.cylinder_3_points" src="_images/cylinder_3_points.png" style="width: 15%;" />
</a>
<figcaption>
<p><span class="caption-text">Cylinder definition with three vertices</span><a class="headerlink" href="#id17" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div>
</section>
<section id="detector-shape-descriptions">
<h4>Detector Shape Descriptions<a class="headerlink" href="#detector-shape-descriptions" title="Link to this heading">¶</a></h4>
<p>An <code class="docutils literal notranslate"><span class="pre">NXoff_geometry</span></code> or <code class="docutils literal notranslate"><span class="pre">NXcylindrical_geometry</span></code> group named <code class="docutils literal notranslate"><span class="pre">detector_shape</span></code>
can be placed in an <code class="docutils literal notranslate"><span class="pre">NXdetector</span></code> or <code class="docutils literal notranslate"><span class="pre">NXdetector_module</span></code> to define the complete
shape of the detector. Alternatively, the group can be named <code class="docutils literal notranslate"><span class="pre">pixel_shape</span></code>
and define the shape of a single pixel. In this case, <code class="docutils literal notranslate"><span class="pre">x_pixel_offset</span></code>,
<code class="docutils literal notranslate"><span class="pre">y_pixel_offset</span></code> and <code class="docutils literal notranslate"><span class="pre">z_pixel_offset</span></code> datasets of the <code class="docutils literal notranslate"><span class="pre">NXdetector</span></code> define
how the pixel shape is tiled to form the geometry of the complete detector.</p>
</section>
</section>
<section id="legacy-geometry-descriptions">
<span id="legacygeometrydescriptions"></span><h3><span class="section-number">1.2.2.4. </span>Legacy Geometry Descriptions<a class="headerlink" href="#legacy-geometry-descriptions" title="Link to this heading">¶</a></h3>
<p>The above system of chained transformations is the recommended way of
encoding geometry going forward. This section describes the traditional way
this was handled in NeXus, which you may find occasionally in old files.</p>
<p><span class="target" id="index-39"></span>Coordinate systems
in NeXus have undergone significant development. Initially, only motor
positions of the relevant motors were stored without further standardization.
This soon proved to be
too little and the <em>NeXus polar coordinate</em> system
<span class="target" id="index-40"></span>was
developed. This system still
is very close to angles that are meaningful to an instrument scientist
but allows to define general positions of
components easily. Then users from the simulation community
approached the NeXus team and asked for a means
to store absolute coordinates. This was implemented through
the use of the <em>NXgeometry</em> class on top of the
<em>McStas</em> <span class="target" id="index-41"></span>system.
We soon learned that all the things we do can be expressed through the
McStas coordinate system. So it became the reference coordinate system
for NeXus. <code class="docutils literal notranslate"><span class="pre">NXgeometry</span></code> was expanded to allow the description of shapes
when the demand came up. Later, members of the
<span class="target" id="index-42"></span>CIF team
convinced the NeXus team of the beauty of transformation matrices and
NeXus was enhanced to store the necessary information to fully map CIF
concepts. Not much had to be changed though as we
choose to document the existing angles in CIF terms. The CIF system
allows to store arbitrary operations and nevertheless calculate
absolute coordinates in the laboratory coordinate system. It also
allows to convert from local, for example detector
coordinate systems, to absolute coordinates in the laboratory system.</p>
<section id="mcstas-and-nxgeometry-system">
<span id="design-coordinate-nxgeometry"></span><h4>McStas and <code class="docutils literal notranslate"><span class="pre">NXgeometry</span></code> System<a class="headerlink" href="#mcstas-and-nxgeometry-system" title="Link to this heading">¶</a></h4>
<p id="index-43">As stated above, NeXus uses the
<em>McStas coordinate system</em> (<a class="reference external" href="http://mcstas.org">http://mcstas.org</a>)
as its laboratory coordinate system.
The instrument is given a global, absolute coordinate system where the
<em>z</em> axis points in the direction of the incident beam,
the <em>x</em> axis is perpendicular to the beam in the horizontal
plane pointing left as seen from the source, and the <em>y</em> axis
points upwards. See  below for a drawing of the McStas coordinate system.  The origin of this
coordinate system is the sample position or, if this is ambiguous, the center of the sample holder
with all angles and translations set to zero.  The McStas coordinate system is
illustrated in the next figure:</p>
<div class="compound">
<figure class="align-center" id="id18">
<span id="fig-mcstas-coord"></span><a class="reference internal image-reference" href="_images/mcstascoord.png"><img alt="fig.mcstas-coord" src="_images/mcstascoord.png" style="width: 60%;" />
</a>
<figcaption>
<p><span class="caption-text">The McStas Coordinate System</span><a class="headerlink" href="#id18" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div>
<p>The NeXus NXgeometry class directly uses the
<span class="target" id="index-44"></span>McStas coordinate system.
<code class="docutils literal notranslate"><span class="pre">NXgeometry</span></code> classes can appear in any
component in order to specify its position.
The suggested name to use is geometry.
In <code class="docutils literal notranslate"><span class="pre">NXgeometry</span></code> the <code class="docutils literal notranslate"><span class="pre">NXtranslation/values</span></code>
field defines the absolute position of the component in the McStas coordinate system. The <code class="docutils literal notranslate"><span class="pre">NXorientation/value</span></code> field describes
the orientation of the component as a vector of in the McStas coordinate system.</p>
</section>
<section id="simple-spherical-polar-coordinate-system">
<span id="design-coordinate-spherical"></span><h4>Simple (Spherical Polar) Coordinate System<a class="headerlink" href="#simple-spherical-polar-coordinate-system" title="Link to this heading">¶</a></h4>
<p id="index-45">In this system,
the instrument is considered as a set of components through
which the incident beam passes. The variable <em>distance</em> is assigned to each component and represents the
effective beam flight path length between this component and the sample. A sign
convention is used where negative numbers represent components pre-sample and positive
numbers components post-sample. At each component there is local spherical coordinate system
with the angles <em>polar_angle</em> and <em>azimuthal_angle</em>.
The size of the sphere is the distance to the previous component.</p>
<p>In order to understand this spherical polar coordinate system it is helpful
to look initially at the common condition that <em>azimuthal_angle</em>
is zero. This corresponds to working directly in the horizontal scattering
plane of the instrument. In this case <em>polar_angle</em> maps
directly to the setting commonly known as <em>two theta</em>.
Now, there are instruments where components live outside of the scattering plane.
Most notably detectors. In order to describe such components we first apply
the tilt out of the horizontal scattering plane as the
<em>azimuthal_angle</em>. Then, in this tilted plane, we rotate
to the component. The beauty of this is that <em>polar_angle</em>
is always <em>two theta</em>. Which, in the case of a component
out of the horizontal scattering plane, is not identical to the value read
from the motor responsible for rotating the component. This situation is shown in
<a class="reference internal" href="#fig-polar-geometry-figure"><span class="std std-ref">Polar Coordinate System</span></a>.</p>
<div class="compound">
<figure class="align-center" id="id19">
<span id="fig-polar-geometry-figure"></span><a class="reference internal image-reference" href="_images/polplane.png"><img alt="fig.polar-geometry-figure" src="_images/polplane.png" style="width: 60%;" />
</a>
<figcaption>
<p><span class="caption-text">NeXus Simple (Spherical Polar) Coordinate System</span><a class="headerlink" href="#id19" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div>
</section>
</section>
</section>
<section id="rules-and-underlying-file-formats">
<h2><span class="section-number">1.2.3. </span>Rules and Underlying File Formats<a class="headerlink" href="#rules-and-underlying-file-formats" title="Link to this heading">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="rules.html">1.2.3.1. Rules for Structuring Information in NeXus Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="datarules.html">1.2.3.2. Rules for Storing Data Items in NeXus Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="fileformat.html">1.2.3.3. Physical File format</a></li>
</ul>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">1.2. NeXus Design</a><ul>
<li><a class="reference internal" href="#nexus-objects-and-terms">1.2.1. NeXus Objects and Terms</a><ul>
<li><a class="reference internal" href="#groups">1.2.1.1. Groups</a></li>
<li><a class="reference internal" href="#fields">1.2.1.2. Fields</a></li>
<li><a class="reference internal" href="#attributes">1.2.1.3. Attributes</a></li>
<li><a class="reference internal" href="#file-attributes">1.2.1.4. File attributes</a></li>
<li><a class="reference internal" href="#links">1.2.1.5. Links</a><ul>
<li><a class="reference internal" href="#external-file-links">External File Links</a></li>
<li><a class="reference internal" href="#combining-nexus-links-and-external-file-links">Combining NeXus links and External File Links</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nexus-base-classes">1.2.1.6. NeXus Base Classes</a><ul>
<li><a class="reference internal" href="#nxdata-facilitates-automatic-plotting"><code class="docutils literal notranslate"><span class="pre">NXdata</span></code> Facilitates Automatic Plotting</a></li>
<li><a class="reference internal" href="#where-to-store-metadata">Where to Store Metadata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nexus-application-definitions">1.2.1.7. NeXus Application Definitions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nexus-geometry">1.2.2. NeXus Geometry</a><ul>
<li><a class="reference internal" href="#the-nexus-coordinate-system">1.2.2.1. The NeXus Coordinate System</a></li>
<li><a class="reference internal" href="#coordinate-transformations">1.2.2.2. Coordinate Transformations</a><ul>
<li><a class="reference internal" href="#coordinate-transformation-field-and-attributes">Coordinate Transformation Field And Attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shape-descriptions">1.2.2.3. Shape Descriptions</a><ul>
<li><a class="reference internal" href="#nxoff-geometry"><code class="docutils literal notranslate"><span class="pre">NXoff_geometry</span></code></a></li>
<li><a class="reference internal" href="#nxcylindrical-geometry"><code class="docutils literal notranslate"><span class="pre">NXcylindrical_geometry</span></code></a></li>
<li><a class="reference internal" href="#detector-shape-descriptions">Detector Shape Descriptions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#legacy-geometry-descriptions">1.2.2.4. Legacy Geometry Descriptions</a><ul>
<li><a class="reference internal" href="#mcstas-and-nxgeometry-system">McStas and <code class="docutils literal notranslate"><span class="pre">NXgeometry</span></code> System</a></li>
<li><a class="reference internal" href="#simple-spherical-polar-coordinate-system">Simple (Spherical Polar) Coordinate System</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#rules-and-underlying-file-formats">1.2.3. Rules and Underlying File Formats</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="introduction-napi.html"
                          title="previous chapter">NAPI: The NeXus Application Programming Interface</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="rules.html"
                          title="next chapter"><span class="section-number">1.2.3.1. </span>Rules for Structuring Information in NeXus Files</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <p>Have a Question? <a href="https://github.com/nexusformat/definitions/issues/new">Get help</a></p>
    <ul class="this-page-menu">
    <style>
		  .avatar-container {
		    display: flex;
		    align-items: center;
		  }
		
		  .avatar {
		    width: 32px;
		    height: 32px;
		    border-radius: 50%;
		    margin-right: 5px;
		  }
		</style>
		
    
    
		<div class="avatar-container">
      
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
<div id="google_search" style="display: none">
	<hr />
	<h3>Google search</h3>
	<form method="get" action="https://www.google.com/search">
		<table border="0" align="center" cellpadding="0">
			<tr>
				<td>
					<input type="text"   name="q" value="" />
				</td>
			</tr>
			<tr>
				<td align="center" style="font-size:75%">
					<input type="radio"  name="sitesearch" value="" />global
					<input type="radio"  name="sitesearch"
						value="manual.nexusformat.org" 
						checked />NeXus manual
					<input type="submit" value="Go" />
					<br />
				</td>
			</tr>
		</table>
	</form>                                
</div>
<script type="text/javascript">$('#google_search').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="rules.html" title="1.2.3.1. Rules for Structuring Information in NeXus Files"
             >next</a> |</li>
        <li class="right" >
          <a href="introduction-napi.html" title="NAPI: The NeXus Application Programming Interface"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">nexus v2024.02 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="user_manual.html" ><span class="section-number">1. </span>NeXus: User Manual</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">1.2. </span>NeXus Design</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="copyright.html">Copyright</a> 1996-2024, NIAC, https://www.nexusformat.org.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    </div>
  </body>
</html>