---
kind: Datatype
name: double
version: 1
description: floating point value
dataty: double
members:
  min:
    dataty: int
    optional: true
  max:
    dataty: int
    optional: true
  unit:
    dataty: string
    optional: true
  absolute_resolution:
    dataty: double
    optional: true
  relative_resolution:
    default: 1.2e-7
    dataty: double
    optional: true
  fmtstr:
    dataty: string
    default: "%.6g"
    optional: true

---
kind: Datatype
name: scaled
version: 1
description: scaled floating point transported as integer
dataty: int
members:
  min:
    dataty: int
  max:
    dataty: int
  scale:
    dataty: double
  unit:
    dataty: string
    optional: true
  absolute_resolution:
    dataty: double
    optional: true
  relative_resolution:
    default: 1.2e-7
    dataty: double
    optional: true
  fmtstr:
    dataty: string
    default: "%.6g"
    optional: true

---
kind: Datatype
name: int
version: 1
description: |
  An int
dataty: int
members:
  min:
    dataty: int
  max:
    dataty: int
  unit:
    dataty: string
    optional: true

---
kind: Datatype
name: bool
version: 1
description: a boolean value
dataty:
  bool
members: {}

---
kind: Datatype
name: enum
version: 1
description: Collection of predefined values mapped to integers.
dataty: todo
  #- string
  #- int
members:
  members:
    dataty:
      dict:
        key: string    # TODO: how to define this nicely?
        value: int

---
kind: Datatype
name: string
version: 1
description: |
  A string
dataty: str
members:
  minchars:
    optional: true
    dataty: int
  maxchars:
    optional: true
    dataty: int
  isUTF8:
    optional: true
    dataty: bool

---
kind: Datatype
name: blob
version: 1
description: base64 encoded string for binary types
dataty: ???  #TODO
members:
  maxbytes:
    dataty: int
  minbytes:
    dataty: int
    default: 0
    optional: true

---
kind: Datatype
name: array
version: 1
description: Multiple values of the same type
dataty:
  list
members:
  members:
    dataty: datainfo  # TODO: cleanly define the recursion
  maxlen:
    dataty: int
  minlen:
    default: 0
    dataty: int
    optional: true

---
kind: Datatype
name: tuple
version: 1
description: finite sequence of variously typed items
dataty:
  list
members:
  members:
    dataty:
      - datainfo

---
kind: Datatype
name: struct
version: 1
description: mixed type collection of values
dataty: TODO
members:
  members:
    dataty:
      dict:
        key: string
        value: datainfo
  optional:
    dataty:
      - string
    optional: true
